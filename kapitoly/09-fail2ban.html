<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Kapitola 9 ‚Äì Fail2Ban</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
  <link rel="stylesheet" href="../assets/css/main.css">
  <script src="../assets/js/main.js" defer></script>
</head>
<body>

<nav class="container-fluid">
  <ul><li><strong>SysAdmin od nuly</strong></li></ul>
  <ul>
    <li><a href="../index.html">Dom≈Ø</a></li>
    <li><a href="08-firewall-ufw-iptables.html">‚Üê P≈ôedchoz√≠</a></li>
    <li><a href="#">Dal≈°√≠ ‚Üí</a></li>
  </ul>
</nav>

<main class="container">
  <div class="layout">

    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="progress-box">
        <div class="progress-label">Postup studia</div>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
      </div>

      <input type="search" id="searchInput" placeholder="Hledat kapitolu‚Ä¶">
      <input type="search" id="contentSearch" placeholder="Hledat v kapitole‚Ä¶">
      <small id="searchInfo"></small>

      <h4>Kapitoly</h4>
      <ul>
        <li><a href="01-sysadmin.html">1. Co je SysAdmin</a></li>
        <li><a href="02-os.html">2. Jak funguje OS</a></li>
        <li><a href="03-linux.html">3. Linux ‚Äì z√°klady</a></li>
        <li><a href="04-linux-instalace.html">4. Instalace Linuxu</a></li>
        <li><a href="05-ssh-a-terminal.html">5. Termin√°l & SSH</a></li>
        <li><a href="06-uzivatele-skupiny-prava.html">6. U≈æivatel√© a pr√°va</a></li>
        <li><a href="07-balicky-a-aktualizace.html">7. Bal√≠ƒçky & apt</a></li>
        <li><a href="08-firewall-ufw-iptables.html">8. Firewall</a></li>
        <li><a href="09-fail2ban.html">9. Fail2Ban</a></li>
      </ul>
    </aside>

    <!-- CONTENT -->
    <section class="content">

      <hgroup>
        <h2>Kapitola 9: Fail2Ban</h2>
        <h3>Automatick√° obrana proti brute-force √∫tok≈Øm</h3>
      </hgroup>

      <!-- √öVOD -->
      <article>
        <h3>Proƒç firewall nestaƒç√≠</h3>
        <p>
          Firewall rozhoduje, <em>kdo se m≈Ø≈æe p≈ôipojit</em>,
          ale ne≈ôe≈°√≠ <strong>chov√°n√≠ po p≈ôipojen√≠</strong>.
        </p>
        <p>
          √ötoƒçn√≠k m≈Ø≈æe m√≠t povolen√Ω p≈ô√≠stup (nap≈ô. na SSH port),
          ale zkou≈°√≠ tis√≠ce hesel.
        </p>
        <p>
          A p≈ôesnƒõ tady p≈ôich√°z√≠ na ≈ôadu <strong>Fail2Ban</strong>.
        </p>
      </article>

      <!-- ANALOGIE -->
      <article>
        <h3>Lidsk√° analogie</h3>
        <p>
          P≈ôedstav si:
        </p>
        <ul>
          <li>Firewall = dve≈ôe</li>
          <li>Fail2Ban = ostraha</li>
        </ul>
        <p>
          Kdy≈æ nƒõkdo klepe jednou ‚Äì OK.  
          Kdy≈æ bu≈°√≠ po≈ô√°d dokola ‚Äì <strong>ostraha ho vyvede ven</strong>.
        </p>
      </article>

      <!-- CO JE FAIL2BAN -->
      <article>
        <h3>Co je Fail2Ban</h3>
        <p>
          Fail2Ban je slu≈æba, kter√°:
        </p>
        <ul>
          <li>sleduje logy</li>
          <li>hled√° podez≈ôel√© chov√°n√≠</li>
          <li>automaticky blokuje IP adresy</li>
        </ul>
        <p>
          Blokace se dƒõje pomoc√≠ firewallu (ufw / iptables).
        </p>
      </article>

      <!-- JAK FUNGUJE -->
      <article>
        <h3>Jak Fail2Ban funguje technicky</h3>
        <ol>
          <li>ƒçte logy (nap≈ô. <code>/var/log/auth.log</code>)</li>
          <li>porovn√°v√° je s pravidly (regex)</li>
          <li>poƒç√≠t√° poƒçet selh√°n√≠</li>
          <li>p≈ôi p≈ôekroƒçen√≠ limitu blokuje IP</li>
        </ol>
      </article>

      <article>
        <h3>Co je brute-force √∫tok</h3>
        <p>
          Brute-force je √∫tok, kdy √∫toƒçn√≠k:
        </p>
        <ul>
          <li>zkou≈°√≠ mnoho hesel</li>
          <li>automatizovanƒõ</li>
          <li>ƒçasto z tis√≠c≈Ø IP adres</li>
        </ul>
        <p>
          Fail2Ban ho <strong>nezastav√≠ √∫plnƒõ</strong>,
          ale v√Ωraznƒõ ho zpomal√≠ a odrad√≠.
        </p>
      </article>

      <!-- INSTALACE -->
      <article>
        <h3>Instalace Fail2Ban</h3>
        <pre><code>sudo apt install fail2ban</code></pre>
        <p>
          Po instalaci slu≈æba bƒõ≈æ√≠ automaticky.
        </p>
      </article>

      <!-- KONFIGURACE -->
      <article>
        <h3>Konfiguraƒçn√≠ filozofie</h3>
        <p>
          Nikdy neupravuj <code>jail.conf</code> p≈ô√≠mo.
        </p>
        <p>
          Vlastn√≠ konfigurace pat≈ô√≠ do:
        </p>
        <pre><code>/etc/fail2ban/jail.local</code></pre>
      </article>

      <article>
        <h3>Z√°kladn√≠ pojmy</h3>
        <ul>
          <li><strong>jail</strong> ‚Äì ochrana slu≈æby</li>
          <li><strong>filter</strong> ‚Äì jak poznat √∫tok</li>
          <li><strong>action</strong> ‚Äì co udƒõlat (blokace)</li>
        </ul>
      </article>

      <article>
        <h3>Z√°kladn√≠ konfigurace SSH jail</h3>
        <pre><code>[sshd]
enabled = true
port = ssh
maxretry = 5
bantime = 10m
findtime = 10m</code></pre>
      </article>

      <article>
        <h3>Vysvƒõtlen√≠ konfigurace</h3>
        <ul>
          <li><code>enabled</code> ‚Äì zapnut√≠ ochrany</li>
          <li><code>maxretry</code> ‚Äì kolik pokus≈Ø je povoleno</li>
          <li><code>bantime</code> ‚Äì jak dlouho je IP blokov√°na</li>
          <li><code>findtime</code> ‚Äì ƒçasov√© okno</li>
        </ul>
      </article>

      <!-- FIREWALL -->
      <article>
        <h3>Jak Fail2Ban blokuje IP</h3>
        <p>
          Fail2Ban nep≈ôeru≈°uje spojen√≠ s√°m.
          M√≠sto toho:
        </p>
        <ul>
          <li>p≈ôid√° pravidlo do firewallu</li>
          <li>IP adresa je √∫plnƒõ od≈ô√≠znuta</li>
        </ul>
        <p>
          Nejƒçastƒõji spolupracuje s <strong>ufw</strong>.
        </p>
      </article>

      <!-- KONTROLA -->
      <article>
        <h3>Kontrola stavu Fail2Ban</h3>
        <pre><code>sudo fail2ban-client status</code></pre>
        <pre><code>sudo fail2ban-client status sshd</code></pre>
      </article>

      <article>
        <h3>Typick√© chyby zaƒç√°teƒçn√≠k≈Ø</h3>
        <ul>
          <li>zapnut√Ω Fail2Ban bez firewallu</li>
          <li>p≈ô√≠li≈° agresivn√≠ nastaven√≠</li>
          <li>blokace vlastn√≠ IP</li>
        </ul>
      </article>

      <!-- LAB -->
      <article class="lab">
        <h3>üß™ LAB ‚Äì Ochrana SSH pomoc√≠ Fail2Ban</h3>

        <h4>√ökoly</h4>
        <ol>
          <li>Nainstaluj Fail2Ban</li>
          <li>Vytvo≈ô <code>jail.local</code></li>
          <li>Povol SSH jail</li>
          <li>Restartuj slu≈æbu</li>
          <li>Zkontroluj stav SSH ochrany</li>
        </ol>

        <button class="show-solution">Zobrazit ≈ôe≈°en√≠</button>

        <div class="lab-solution">
          <pre><code>sudo apt install fail2ban
sudo nano /etc/fail2ban/jail.local
sudo systemctl restart fail2ban
sudo fail2ban-client status sshd</code></pre>
        </div>
      </article>

      <article>
        <h3>Shrnut√≠ kapitoly</h3>
        <p>
          Fail2Ban je druh√° obrann√° linie po firewallu.
          Sleduje chov√°n√≠ a reaguje automaticky.
        </p>
        <p>
          V kombinaci s SSH kl√≠ƒçi a firewallen
          tvo≈ô√≠ <strong>velmi siln√Ω z√°klad zabezpeƒçen√≠</strong>.
        </p>
      </article>

    </section>

  </div>
</main>

<footer class="container">
  <small><a href="../index.html">SysAdmin od nuly</a></small>
</footer>

</body>
</html>
